"use strict";(self["webpackChunkwatermobile_eslintonly"]=self["webpackChunkwatermobile_eslintonly"]||[]).push([[711],{750:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("div",{staticClass:"fix"},[t("form",{staticClass:"form-signin"},[t("img",{staticClass:"mb-4",attrs:{src:o(8431),alt:"自來水公司LOGO",width:"72",height:"72"}}),t("h1",{staticClass:"h4 mb-3 font-weight-bold"},[e._v("圖資查詢系統")]),t("h1",{staticClass:"h5 mb-3 font-weight-bold"},[e._v("(行動版)")]),t("b-form-select",{staticClass:"form-control mb-4 font-weight-bold selectfix",attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userAccount,expression:"userAccount"}],staticClass:"form-control",attrs:{type:"input",placeholder:"帳號",required:""},domProps:{value:e.userAccount},on:{input:function(t){t.target.composing||(e.userAccount=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userPassword,expression:"userPassword"}],staticClass:"form-control mt-4",attrs:{type:"password",placeholder:"密碼",autocomplete:"on",required:""},domProps:{value:e.userPassword},on:{input:function(t){t.target.composing||(e.userPassword=t.target.value)}}}),t("div",{staticClass:"d-flex align-items-center justify-content-between mt-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userVerify,expression:"userVerify"}],staticClass:"form-control formifx",attrs:{type:"verify",placeholder:"請輸入驗證碼",required:""},domProps:{value:e.userVerify},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.LoginCheck.apply(null,arguments)},input:function(t){t.target.composing||(e.userVerify=t.target.value)}}}),t("b-icon",{staticClass:"iconfix refresh",attrs:{icon:"arrow-clockwise"},on:{click:e.refreshCode}}),t("IdentifyCode",{staticClass:"d-flex",attrs:{identifyCode:e.identifyCode}})],1),t("b-button",{staticClass:"btn btn-lg btn-block mt-4 fixLoginBtn",attrs:{variant:"primary"},on:{click:e.LoginCheck}},[e._v("登入")])],1)])])},s=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"s-canvas"},[t("canvas",{attrs:{id:"s-canvas",width:e.contentWidth,height:e.contentHeight}})])},i=[],a={name:"IdentifyCode",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:35},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:116},contentHeight:{type:Number,default:38}},methods:{randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){let o=this.randomNum(e,t),n=this.randomNum(e,t),s=this.randomNum(e,t);return"rgb("+o+","+n+","+s+")"},drawPic(){let e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let o=0;o<this.identifyCode.length;o++)this.drawText(t,this.identifyCode[o],o);this.drawLine(t),this.drawDot(t)},drawText(e,t,o){e.fillStyle=this.randomColor(50,160),e.font="35px Arial";let n=o*(this.contentWidth/this.identifyCode.length),s=38;e.translate(n,s),e.fillText(t,0,0),e.translate(-n,-s)},drawLine(e){for(let t=0;t<0;t++)e.strokeStyle=this.randomColor(100,200),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<10;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},u=a,l=o(1001),d=(0,l.Z)(u,r,i,!1,null,null,null),h=d.exports,c=o(2324),m={name:"LoginPage",components:{IdentifyCode:h},data(){return{userAccount:"guest",userPassword:"guest",userVerify:"",identifyCode:"",identifyCodes:"0123456789",selected:{ADZone:"pubhq",userZone:"",extent:""},options:[{value:{ADZone:"pubhq",userZone:"",extent:""},text:"總處"},{value:{ADZone:"pub01",userZone:"01",extent:"290888.677753005,2729663.74354507,351549.696778188,2799121.57918878"},text:"一區"},{value:{ADZone:"pub02",userZone:"02",extent:"248579.654944045,2720036.38602586,298550.714410571,2781020.78005939"},text:"二區"},{value:{ADZone:"pub03",userZone:"03",extent:"211851.301448155,2687575.52830169,291760.731009999,2759835.296374"},text:"三區"},{value:{ADZone:"pub04",userZone:"04",extent:"195969.401088417,2592423.99756662,295752.921976107,2706371.14095748"},text:"四區"},{value:{ADZone:"pub05",userZone:"05",extent:"147609.631715938,2568124.43338973,245624.384637974,2637704.76620646"},text:"五區"},{value:{ADZone:"pub06",userZone:"06",extent:"150435.32153896,2531723.82415404,214806.517016181,2590177.49098738"},text:"六區"},{value:{ADZone:"pub07",userZone:"07",extent:"77693.3466582598,2485543.08320941,255014.128710709,2634766.4049369"},text:"七區"},{value:{ADZone:"pub08",userZone:"08",extent:"282112.97659785,2689427.92328793,347551.676706314,2764841.14001586"},text:"八區"},{value:{ADZone:"pub09",userZone:"09",extent:"248626.421698634,2555180.75007733,328508.781102712,2696207.25004611"},text:"九區"},{value:{ADZone:"pub10",userZone:"10",extent:"223162.340077418,2427498.61894551,313477.657084031,2593509.84118134"},text:"十區"},{value:{ADZone:"pub11",userZone:"11",extent:"173453.975685867,2631329.98188754,217791.440343323,2676898.99469829"},text:"十一區"},{value:{ADZone:"pub12",userZone:"12",extent:"281896.392312511,2742589.74119859,303610.082696441,2785088.75529013"},text:"十二區"},{value:{ADZone:"pub113",userZone:"13",extent:"183363.626942521,2422004.77310209,240162.160705329,2531612.52415244"},text:"十三區"},{value:{ADZone:"pub13",userZone:"",extent:"281896.392312511,2742589.74119859,303610.082696441,2785088.75529013"},text:"北工處"},{value:{ADZone:"pub14",userZone:"",extent:"195969.401088417,2592423.99756662,295752.921976107,2706371.14095748"},text:"中工處"},{value:{ADZone:"pub15",userZone:"",extent:"77692.0680844401,2422116.126398,255013.950002,2633395.41149565"},text:"南工處"}]}},methods:{randomNum(e,t){return t+=1,Math.floor(Math.random()*(t-e)+e)},refreshCode(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode(e,t){for(let o=0;o<t;o++)this.identifyCode+=e[this.randomNum(0,e.length-1)]},LoginCheck(){0===this.userAccount.length?(new c.hW("請輸入帳號!"),this.refreshCode()):0===this.userPassword.length?(new c.hW("請輸入密碼!"),this.refreshCode()):0===this.userVerify.length?(new c.hW("請輸入驗證碼!"),this.refreshCode()):this.userVerify.toUpperCase()!==this.identifyCode.toUpperCase()?(new c.hW("您輸入的驗證碼錯誤!"),this.refreshCode()):(new c.N8("AD帳號驗證中，請稍後..."),this.axios.post("api/Authorization",{Domain:this.selected.ADZone,Account:this.userAccount,Password:this.userPassword}).then((e=>{"success"===e.data.tologin?(sessionStorage.setItem("UserZone",this.selected.userZone),sessionStorage.setItem("UserExtent",this.selected.extent),sessionStorage.setItem("UserTraceId",e.data.traceid),new c.F7("歡迎，"+e.data.cname+"使用圖資查詢系統(行動版)"),this.$router.replace("/olmap")):"ADNoAuthorization"===e.data.tologin?(new c.hW("查無此AD帳號!"),this.refreshCode()):"NoAuthorization"===e.data.tologin?(new c.hW("您無權限進入系統，請洽帳號管理人員!"),this.refreshCode()):"Error"===e.data.tologin&&(new c.hW("帳號或密碼輸入錯誤!"),this.refreshCode())})).catch((function(){new c.hW("連接逾時!請重新操作")})))}},created(){this.refreshCode()}},f=m,p=(0,l.Z)(f,n,s,!1,null,"0ab1ef37",null),x=p.exports},8431:function(e,t,o){e.exports=o.p+"img/自來水logo.81572e55.png"}}]);
//# sourceMappingURL=711.99069f95.js.map